e911
----

About e911
~~~~~~~~~~
The Enhanced 911 (E911) functionality has been implemented for handling emergency situations. Administrators can perform the required set up in order for Uniteme and Unite users to be able to call the 911 number when needed. The functionality uses location based technology to pin point the location of 911 callers and connect them to the appropriate public resources.

The system to automatically associates a location with the origin of the call. This location may be a physical address or other geographic reference information such as X/Y map coordinates. In sipXcom, administrators are able to define physical locations and link them to users. Physical locations have a DID/ELIN (Emergency Location Identification Number) that will be sent out to the 911 dispatcher. Based on the called ID sent operators will be able to dispatch emergency services directly to the user's location.

.. note::

  * E911 is a system used only in North America.
  * Calls made to other emergency telephone numbers are not supported.

Using the e911 REST API
~~~~~~~~~~~~~~~~~~~~~~~
sipXcom also defines a REST API to perform CRUD operations on the Emergency Resource Location (ERL) table and also to link users to locations. This API may be used by third parties in order to update the ERL data in the PS-ALI database (Private Switch/Automatic Location Identification). It also helps administrators update in bulk the locations table and link users to locations.
The following resources for the E911 API are only available for users with administration rights:

**Emergency Resource Location (ERL)**

  * View list of ERLs
  * Filter ERLs by ELIN
  * Filter ERLs by user name
  * Filter ERLs by user groups
  * Filter ERLs by the number of assigned phones
  * Update ERLs for one or multiple phones
  * Update ERLs for one or multiple phone groups

**Registrations**

  * View registrations for an IP
  * View registrations for a Line/Extension

**Phones**

  * View list of phones
  * View list of phones changed since dd/mm/yy

Emergency Resource Location (ERL)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erls

**Default Resource Properties**
  The resource is represented by the following properties when the GET request is performed:

.. list-table::

  * - **Property**
    - **Description**
  * - *elin*
    - ELIN number.
  * - *location*
    - Caller location.
  * - *addressInfo*
    - Address details.
  * - *description*
    - Optional description.

**Specific Response Codes:** N/A

**HTTP Method:** GET
  Returns a list with all the ERLs defined in the system.

**Example**::

  foo

**HTTP Method:** PUT
  Save a list of ERLs.

**Example**::

  bar

**HTTP Method:** DELETE
  Delete the ERL with the specified ELIN

**Unsupported HTTP Method:** POST

Filter ERLs by ELIN
~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erl/elin/{elin}

**Default Resource Properties**
  The resource is represented by the following properties when the GET request is performed:

.. list-table::

  * - **Property**
    - **Description**
  * - *elin*
    - ELIN number.
  * - *location*
    - Caller location.
  * - *addressInfo*
    - Address details.
  * - *description*
    - Optional description.

**Specific Response Codes:** N/A

**HTTP Method:** GET
  Returns the ERLs with the specified ELIN.

**Example**::

  foo

**HTTP Method:** PUT
  Update the ERL with the specified ELIN

**HTTP Method:** DELETE
  Delete the ERL with the specified ELIN

**Unsupported HTTP Method:** POST

Filter ERLs by user name
~~~~~~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erl/user/{username}

**Default Resource Properties**
  The resource is represented by the following properties when the GET request is performed:

.. list-table::

  * - **Property**
    - **Description**
  * - *location*
    - The location
  * - *elin*
    - The ELIN number.
  * - *addressInfo*
    - Address details.
  * - *description*
    - Optional description.

**Specific Response Codes:** N/A

**HTTP Method:** GET
  Returns the ERL linked to the user identified by username. Data is plain text and represents the ELIN of the ERL.

**Example**::

  foo

**HTTP Method:** PUT
  Update the ERL of the user. PUT data is plain text and represents the ERL.

**Example**::

  bar

**HTTP Method:** DELETE
  Set the user ERL to none.

**Example**::

  foo

**Unsupported HTTP Method:** POST

Filter ERLs by user groups
~~~~~~~~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erl/group/{groupName}

**Default Resource Properties**
  The resource is represented by the following properties when the GET request is performed:

.. list-table::

  * - **Property**
    - **Description**
  * - *location*
    - The location
  * - *elin*
    - The ELIN number.
  * - *addressInfo*
    - Address details.
  * - *description*
    - Optional description.

**Specific Response Codes:** N/A

**HTTP Method:** GET
  Returns the ERL identified with the user group.

**Example**::

  foo

**HTTP Method:** PUT
  Updates the ERL of the user group.

**Example**::

  bar

**Unsupported HTTP Method:** POST

Filter ERLs by the number of assigned phones
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erl/phone/{serial_number}

**Default Resource Properties**
  The resource is represented by the following properties when the GET request is performed:

.. list-table::

  * - **Property**
    - **Description**
  * - *location*
    - The location
  * - *elin*
    - The ELIN number.
  * - *addressInfo*
    - Address details.
  * - *description*
    - Optional description.
  * - *serial*
    - phone serial

**Specific Response Codes:** N/A

**HTTP Method:** GET
  Retrieves a list with the locations for the phone(s).

**Example**::

  foo

**Unsupported HTTP Method:** PUT, POST, DELETE

Update ERLs for one or multiple phones
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erl/phones

**Default Resource Properties:** N/A

**Specific Response Codes:**
  Error 400 if wrong ELIN or serial is specified.

**HTTP Method:** PUT
  Update locations for one or more phones.

**Example**::

  bar

**Unsupported HTTP Method:** GET, POST, DELETE

Update ERLs for one or multiple phone groups
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

**Resource URI:** /erl/phonegroup/{groupName}

**Default Resource Properties**
  The resource is represented by the following properties when the GET request is performed:

.. list-table::

  * - **Property**
    - **Description**
  * - *location*
    - The location
  * - *elin*
    - The ELIN number.
  * - *addressInfo*
    - Address details.
  * - *description*
    - Optional description.

**Specific Response Codes:** N/A

**HTTP Method:** GET
  Retrieves locations for phone groups.

**Example**::

  foo

**HTTP Method:** PUT
  Updates locations for phone groups.

**Example**::

  bar

**HTTP Method:** DELETE
  Deletes location for phone groups.

**Unsupported HTTP Method:** POST

